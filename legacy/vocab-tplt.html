<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>vocab</title>
    <link rel="stylesheet" href="vocab.css" />
  </head>
  <body>
    % set rclasses = map(graph.resource, sorted(
                set(graph.subjects(RDF.type, OWL.Class))))
    % set rproperties = map(graph.resource, sorted(
                  union(set(graph.subjects(RDF.type, OWL.ObjectProperty)),
                  set(graph.subjects(RDF.type, OWL.DatatypeProperty)))
                ))
    % set DOMAIN = union(SCHEMA.domainIncludes, RDFS.domain)
    % set RANGE = union(SCHEMA.rangeIncludes, RDFS.range)
    <nav>
      % for rclass in rclasses:
      <a href="${link(rclass)}">${rclass.qname()}</a>
      % endfor
      <hr />
      % for rprop in rproperties:
      <a href="${link(rprop)}">${rprop.qname()}</a>
      % endfor
    </nav>

    <article>
      % for rclass in rclasses:
      <div id="${rclass.qname()}" class="class">
        <h2><code>${rclass.qname()}</code> <i>${(label(rclass))}</i></h2>
        <dl>
          <dt>base-classes</dt>
          <dd>
            <ul class="baseclasses">
              % for c in sorted(rclass.objects(union(RDFS.subClassOf, OWL.equivalentClass))):
              <li>
                <a href="${link(c)}">${c.qname()}</a>
              </li>
              % endfor
            </ul>
          </dd>
          <dt>sub-classes</dt>
          <dd>
          <ul class="subclasses">
              % for c in sorted(rclass.subjects(union(RDFS.subClassOf, OWL.equivalentClass))):
              <li><a href="${link(c)}">${c.qname()}</a></li>
              % endfor
            </ul>
          </dd>
          <dt>instances</dt>
          <dd>
          <ul class="instances">
              % for i in sorted(rclass.subjects(RDF.type)):
              <li><a href="${link(i)}">${i.qname()}</a></li>
              % endfor
            </ul>
          </dd>
          <dt>properties</dt>
          <dd>
            <ul class="properties">
              % for prop in sorted(rclass.subjects(DOMAIN)):
              <li>
                <code>${prop.qname()}</code>
                <span>(${prop.value(SKOS.notation)})</span>
                <i>${(label(prop))}</i>
                % set rng = prop.value(RANGE)
                % if rng
                  <span>: <a href="${link(rng)}">${rng.qname()}</a></span>
                % endif
                <!--!
                % for g in prop.objects(VANN.termGroup):
                <i><a href="${link(g)}">${g.qname()}</a></i>
                % endfor
                -->
              </li>
              % endfor
            </ul>
          </dd>
        </dl>
      </div>
      % endfor
    </article>

    <hr />

    <article>
      % for rprop in rproperties:
      <div id="${rprop.qname()}" class="class">
        <h2><code>${rprop.qname()}</code> <i>${(label(rprop))}</i></h2>
        <dl>
          <dt>base-properties</dt>
          <dd>
            <ul class="baseclasses">
              % for p in sorted(rprop.objects(union(RDFS.subPropertyOf, OWL.equivalentProperty))):
              <li>
                <a href="${link(p)}">${p.qname()}</a>
              </li>
              % endfor
            </ul>
          </dd>
          <dt>sub-properties</dt>
          <dd>
          <ul class="subclasses">
              % for p in sorted(rprop.subjects(union(RDFS.subPropertyOf, OWL.equivalentProperty))):
              <li>
                <a href="${link(p)}">${p.qname()}</a>
              </li>
              % endfor
            </ul>
          </dd>
          <dt>domain(s)</dt>
          <dd>
            <ul>
              % for c in sorted(rprop.objects(DOMAIN)):
              <li>
                <code>${c.qname()}</code>
                <i>${(label(c))}</i>
              </li>
              % endfor
            </ul>
          </dd>
          <dt>range(s)</dt>
          <dd>
            <ul>
              % for c in sorted(rprop.objects(RANGE)):
              <li>
                <code>${c.qname()}</code>
                <i>${(label(c))}</i>
              </li>
              % endfor
            </ul>
          </dd>
        </dl>
      </div>
      % endfor
    </article>

  </body>
</html>
